import streamlit as st
import pandas as pd

# ---------------------------------------------------
# ãƒšãƒ¼ã‚¸è¨­å®š
# ---------------------------------------------------
st.set_page_config(page_title="KEIBA APPï¼ˆå®‰å®šç‰ˆï¼‰", layout="wide")

st.markdown("## ğŸ KEIBA APP - Stable UI Base")
st.markdown(
    """
    <span style='color:#ff7f00; font-weight:700;'>ã‚¿ãƒ–æ§‹é€ ã¯å®Œå…¨å¾©æ—§æ¸ˆã¿</span><br>
    ä»Šã¯UIåŸºç¤ã®ã¿ã€‚ã“ã“ã«å‡ºé¦¬è¡¨ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ãƒ»ã‚¹ã‚³ã‚¢è¨ˆç®—ãƒ»é¦¬åˆ¸ãƒ­ã‚¸ãƒƒã‚¯ã‚’å¾Œã‹ã‚‰çµ„ã¿è¾¼ã‚€ã€‚
    """,
    unsafe_allow_html=True,
)

# ---------------------------------------------------
# ãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿ï¼ˆå¿…ãšå®‰å®šè¡¨ç¤ºã§ãã‚‹å†…å®¹ï¼‰
# ---------------------------------------------------
demo_rows = [
    {"æ ": 1, "é¦¬ç•ª": 1, "é¦¬å": "ã‚µãƒ³ãƒ—ãƒ«ãƒ›ãƒ¼ã‚¹A", "æ€§é½¢": "ç‰¡4", "é¨æ‰‹": "å·ç”°"},
    {"æ ": 2, "é¦¬ç•ª": 2, "é¦¬å": "ã‚µãƒ³ãƒ—ãƒ«ãƒ›ãƒ¼ã‚¹B", "æ€§é½¢": "ç‰3", "é¨æ‰‹": "ãƒ«ãƒ¡ãƒ¼ãƒ«"},
    {"æ ": 3, "é¦¬ç•ª": 3, "é¦¬å": "ã‚µãƒ³ãƒ—ãƒ«ãƒ›ãƒ¼ã‚¹C", "æ€§é½¢": "ç‰¡5", "é¨æ‰‹": "æ­¦è±Š"},
]
df_demo = pd.DataFrame(demo_rows)

# ---------------------------------------------------
# ã‚¿ãƒ–ç”Ÿæˆï¼ˆã“ã“ãŒå£Šã‚Œã‚‹ã¨è¡¨ç¤ºãŒæ¶ˆãˆã‚‹ï¼‰
# ---------------------------------------------------
tab_shutuba, tab_score, tab_ai, tab_baken, tab_info = st.tabs(
    ["å‡ºé¦¬è¡¨", "ã‚¹ã‚³ã‚¢", "AIã‚¹ã‚³ã‚¢", "é¦¬åˆ¸", "åŸºæœ¬æƒ…å ±"]
)

# ---------------------------------------------------
# å‡ºé¦¬è¡¨
# ---------------------------------------------------
with tab_shutuba:
    st.subheader("ğŸ“‹ å‡ºé¦¬è¡¨ï¼ˆãƒ‡ãƒ¢ï¼‰")
    st.dataframe(df_demo, use_container_width=True)

# ---------------------------------------------------
# ã‚¹ã‚³ã‚¢
# ---------------------------------------------------
with tab_score:
    st.subheader("ğŸ”¢ ã‚¹ã‚³ã‚¢ï¼ˆãƒ‡ãƒ¢ï¼‰")

    # ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¹ãƒ†ãƒ¼ãƒˆåˆæœŸåŒ–
    if "manual_score" not in st.session_state:
        st.session_state.manual_score = [50, 50, 50]

    new_scores = []
    for i, row in df_demo.iterrows():
        v = st.number_input(
            f"{row['é¦¬å']} ã®ã‚¹ã‚³ã‚¢",
            min_value=0, max_value=100,
            value=st.session_state.manual_score[i],
            key=f"score_{i}"
        )
        new_scores.append(v)

    st.session_state.manual_score = new_scores

    df_out = df_demo.copy()
    df_out["æ‰‹å‹•ã‚¹ã‚³ã‚¢"] = st.session_state.manual_score

    st.dataframe(df_out, use_container_width=True)

# ---------------------------------------------------
# AIã‚¹ã‚³ã‚¢
# ---------------------------------------------------
with tab_ai:
    st.subheader("ğŸ¤– AIã‚¹ã‚³ã‚¢ï¼ˆãƒ‡ãƒ¢ï¼‰")
    st.info("ã“ã“ã« AI ã‚¹ã‚³ã‚¢ãŒå…¥ã‚Šã¾ã™ã€‚ï¼ˆä»Šã¯ä»®è¡¨ç¤ºï¼‰")
    st.dataframe(df_demo, use_container_width=True)

# ---------------------------------------------------
# é¦¬åˆ¸ã‚¿ãƒ–
# ---------------------------------------------------
with tab_baken:
    st.subheader("ğŸ’´ é¦¬åˆ¸ï¼ˆãƒ‡ãƒ¢ï¼‰")
    st.info("ã“ã“ã«é¦¬åˆ¸ãƒ­ã‚¸ãƒƒã‚¯ãŒå…¥ã‚Šã¾ã™ã€‚")

# ---------------------------------------------------
# åŸºæœ¬æƒ…å ±
# ---------------------------------------------------
with tab_info:
    st.subheader("â„¹ï¸  åŸºæœ¬æƒ…å ±ï¼ˆãƒ‡ãƒ¢ï¼‰")
    st.write("ã“ã“ã«ãƒ¬ãƒ¼ã‚¹æƒ…å ±ãŒå…¥ã‚Šã¾ã™ã€‚")
